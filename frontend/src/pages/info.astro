---
import MainLayout from '../layouts/layout.astro';
import { directus } from '../lib/directus';
import { readSingleton } from '@directus/sdk';

// 1. Daten laden (Logik 1:1 aus contact.astro übernommen)
let settings;
try {
    settings = await directus.request(readSingleton('global_settings'));
} catch (error) {
    console.error("Info: Konnte Global Settings nicht laden", error);
}

// --- DATEN-LOGIK: ÖFFNUNGSZEITEN ---
const defaultOpeningHours = [
    { label: "Montag – Donnerstag", time: "09:00 – 16:00", highlight: false },
    { label: "Freitag", time: "09:00 – 13:00", highlight: false },
    { label: "Veranstaltungen", time: "Je nach Programm", highlight: true }
];
const openingHours = settings?.opening_hours || defaultOpeningHours;

// --- DATEN-LOGIK: BARRIEREFREIHEIT ---
const defaultAccessItems = [
    { label: "Ebenerdiger Zugang (Rampe)", icon: "wheelchair" },
    { label: "Euro-Key Behinderten-WC", icon: "restroom" },
    { label: "Behinderten-Parkplatz (Hof)", icon: "square-parking" },
    { label: "Assistenzhunde willkommen", icon: "dog" }
];
const accessibilityItems = settings?.accessibility_items || defaultAccessItems;

// --- EIGENE DATEN FÜR INFOZENTRUM ---
const tasks = [
    { 
        title: "Rechte & Kosten", 
        icon: "fa-scale-balanced", 
        text: "Wir klären deinen Anspruch nach dem Behindertengesetz (LEVO) und rechnen mögliche Selbstbehalte vorab gemeinsam durch." 
    },
    { 
        title: "Antrags-Hilfe", 
        icon: "fa-file-signature", 
        text: "Behördendeutsch kann kompliziert sein. Wir helfen dir beim Ausfüllen von Anträgen (Behindertenpass, Pflegegeld, Förderungen)." 
    },
    { 
        title: "Assistenz finden", 
        icon: "fa-handshake-angle", 
        text: "Gemeinsame Klärung, welche Leistung (Wohnassistenz, Freizeitassistenz, Familienentlastung, persönliches Budget) genau zu deinem Leben passt." 
    },
    { 
        title: "Netzwerk Graz", 
        icon: "fa-route", 
        text: "Wir kennen die Stadt. Wenn wir etwas nicht selbst anbieten, wissen wir genau, wer dir in Graz weiterhelfen kann." 
    }
];

const faqs = [
    { 
        q: "Kostet die Beratung etwas?", 
        a: "Nein. Die Beratung im Infozentrum ist immer kostenlos und unverbindlich. Wenn du später mobile Dienste (z.B. Wohnassistenz) in Anspruch nimmst, kann je nach Einkommen ein gesetzlicher Selbstbehalt anfallen. Das rechnen wir aber vorher genau aus." 
    },
    { 
        q: "Brauche ich einen Termin?", 
        a: "Für kurze Fragen kannst du einfach vorbeikommen. Für ausführliche Beratung (z.B. Anträge ausfüllen) empfehlen wir einen Termin, damit wir uns Zeit nehmen können." 
    },
    { 
        q: "Welche Dokumente brauche ich?", 
        a: "Für das Erstgespräch gar nichts – komm einfach so. Falls du bereits Bescheide, Arztbriefe oder den Behindertenpass hast, bring sie gerne mit. Das hilft uns, die Situation schneller zu erfassen." 
    }
];
---

<MainLayout title="Infozentrum | Die Brücke">
    
    {/* --- HERO SECTION (Studio Style) --- */}
    <section class="px-4 sm:px-6 pt-6 pb-20">
        <div class="relative bg-slate-900 rounded-[48px] overflow-hidden min-h-[60vh] flex items-center px-6 md:px-16 py-24">
            
            {/* Background Effects */}
            <div class="absolute top-0 right-0 w-full md:w-2/3 h-full overflow-hidden pointer-events-none">
                <div class="absolute top-[-10%] right-[-10%] w-[600px] h-[600px] bg-indigo-500/20 rounded-full blur-[120px] animate-pulse-slow"></div>
                <div class="absolute bottom-[-10%] right-[10%] w-[500px] h-[500px] bg-rose-500/10 rounded-full blur-[100px]"></div>
                <div class="absolute inset-0 bg-[url('/noise.png')] opacity-20 mix-blend-overlay"></div>
            </div>

            <div class="max-w-7xl mx-auto w-full relative z-10 grid lg:grid-cols-2 gap-16 items-center">
                
                {/* Text Content */}
                <div>
                    <div class="mb-8">
                        <a href="/services" class="inline-flex items-center text-slate-400 hover:text-white font-bold transition-colors group text-xs uppercase tracking-widest">
                            <i class="fa-solid fa-arrow-left mr-2 group-hover:-translate-x-1 transition-transform"></i>
                            Zurück zur Übersicht
                        </a>
                    </div>

                    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-rose-300 text-xs font-bold uppercase tracking-widest mb-8 backdrop-blur-md">
                        <span class="w-2 h-2 rounded-full bg-rose-500 animate-pulse"></span>
                        Anlaufstelle & Beratung
                    </div>
                    
                    <h1 class="text-5xl md:text-7xl font-display font-bold text-white mb-8 leading-[0.95] tracking-tight text-balance">
                        Orientierung & <br/>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-rose-400 to-indigo-400">Rückhalt.</span>
                    </h1>
                    
                    <p class="text-xl text-slate-300 leading-relaxed mb-10 max-w-lg font-medium border-l-4 border-rose-500 pl-6">
                        Das Infozentrum ist deine erste Adresse für alles, was den Alltag betrifft. Rechte, Anträge oder einfach ein offenes Ohr – unbürokratisch und menschlich.
                    </p>
                    
                    <div class="flex flex-wrap gap-4">
                        <a href="#themen" class="px-8 py-3 bg-white text-slate-900 rounded-full font-bold hover:bg-rose-500 hover:text-white transition-all shadow-lg hover:shadow-rose-500/20">
                            Themenübersicht
                        </a>
                    </div>
                </div>

                {/* Hero Visual: Neon "Hello" (Welcoming & Modern) */}
                <div class="relative hidden lg:block perspective-1000">
                    <div class="relative z-10 rounded-[40px] overflow-hidden shadow-2xl rotate-2 hover:rotate-0 transition-transform duration-700 border border-white/10 bg-slate-800 aspect-[4/3] group">
                        <img 
                            src="https://images.unsplash.com/photo-1516382799247-87df95d790b7?q=80&w=1000&auto=format&fit=crop" 
                            alt="Neon Sign Hello" 
                            class="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity duration-700 scale-110"
                        />
                         <div class="absolute inset-0 bg-gradient-to-t from-slate-900/40 to-transparent pointer-events-none"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {/* --- KERNAUFGABEN GRID (Bento) --- */}
    <section id="themen" class="px-4 sm:px-6 pb-32">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-20">
                <h2 class="text-4xl md:text-5xl font-display font-bold text-slate-900 dark:text-white tracking-tighter mb-4">Was wir für dich tun.</h2>
                <p class="text-slate-500 dark:text-slate-400 text-lg max-w-2xl mx-auto">Wir helfen dir, den Überblick im Dschungel der Möglichkeiten zu behalten.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                {tasks.map(card => (
                    <div class="info-card group bg-white dark:bg-slate-900 rounded-[40px] p-10 border border-slate-100 dark:border-slate-800 hover:shadow-xl transition-all duration-500 text-left hover:-translate-y-2">
                        <div class="icon-box w-16 h-16 rounded-3xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-900 dark:text-white text-2xl mb-8 shadow-sm group-hover:bg-rose-500 group-hover:text-white transition-all duration-500">
                            <i class={`fa-solid ${card.icon}`}></i>
                        </div>
                        <h3 class="text-2xl font-display font-bold text-slate-900 dark:text-white mb-4 tracking-tight">{card.title}</h3>
                        <p class="text-slate-500 dark:text-slate-400 text-sm leading-relaxed font-medium">{card.text}</p>
                    </div>
                ))}
            </div>
        </div>
    </section>

    {/* --- OFFENES HAUS SECTION --- */}
    <section class="px-4 sm:px-6 pb-32">
        <div class="mx-0 md:mx-0 rounded-[48px] px-8 py-24 bg-slate-900 border border-slate-800 relative overflow-hidden shadow-2xl">
            <div class="absolute top-0 right-0 w-1/2 h-full bg-rose-600/5 skew-x-12 translate-x-1/4 pointer-events-none"></div>
            
            <div class="max-w-7xl mx-auto relative z-10 grid lg:grid-cols-2 gap-24 items-center">
                <div>
                    <span class="text-rose-500 font-bold tracking-widest uppercase text-xs mb-6 block underline decoration-rose-500 decoration-2 underline-offset-8">Unser Vibe</span>
                    <h2 class="text-4xl md:text-6xl font-display font-extrabold text-white mb-8 tracking-tighter leading-tight">
                        Offenes Haus. <br/><span class="text-rose-500 italic">Dein Raum.</span>
                    </h2>
                    <p class="text-xl text-slate-400 leading-relaxed mb-12 max-w-xl font-medium">
                        Das Infozentrum ist mehr als ein Büro. Es ist ein offener, konsumfreier Ort der Begegnung in Graz. Hier kannst du einfach sein, einen Kaffee trinken oder die Zeitung lesen.
                    </p>
                    <div class="grid grid-cols-2 gap-8">
                        {[
                            {icon: "fa-mug-hot", label: "Café-Bereich"},
                            {icon: "fa-leaf", label: "Garten-Oase"},
                            {icon: "fa-wifi", label: "Technik-Support"},
                            {icon: "fa-people-roof", label: "Mitgestaltung"}
                        ].map(item => (
                            <div class="flex items-center gap-4 group cursor-default">
                                <div class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center group-hover:bg-rose-500 transition-colors">
                                    <i class={`fa-solid ${item.icon} text-rose-500 group-hover:text-white transition-colors`}></i>
                                </div>
                                <span class="font-bold text-sm uppercase tracking-wide text-slate-300 group-hover:text-white transition-colors">{item.label}</span>
                            </div>
                        ))}
                    </div>
                </div>
                
                <div class="relative aspect-square rounded-[48px] overflow-hidden border border-white/10 group shadow-2xl">
                    <img 
                        src="https://images.pexels.com/photos/3184418/pexels-photo-3184418.jpeg?auto=compress&cs=tinysrgb&w=1200" 
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-[1.5s]" 
                        alt="Begegnung im Infozentrum" 
                    />
                    <div class="absolute inset-0 bg-gradient-to-t from-slate-900/90 via-transparent to-transparent"></div>
                    <div class="absolute bottom-10 left-10 right-10">
                        <p class="text-xs font-bold uppercase tracking-widest mb-2 text-rose-500">Motto seit 1983</p>
                        <p class="text-3xl font-display font-bold text-white leading-tight">"Selbstbestimmung. <br/>Gemeinsam gestalten."</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {/* --- FAQ SECTION --- */}
    <section class="px-4 sm:px-6 pb-24">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-display font-bold text-slate-900 dark:text-white mb-10 text-center">Häufig gefragt</h2>
            <div class="grid gap-4">
                {faqs.map((faq, idx) => (
                    <details class="group bg-slate-50 dark:bg-slate-900 rounded-[32px] overflow-hidden border border-slate-100 dark:border-slate-800">
                        <summary class="flex justify-between items-center font-bold cursor-pointer list-none p-6 md:p-8 text-lg text-slate-900 dark:text-white hover:text-rose-600 dark:hover:text-rose-400 transition-colors">
                            <span>{faq.q}</span>
                            <span class="transition group-open:rotate-180">
                                <i class="fa-solid fa-chevron-down text-slate-400"></i>
                            </span>
                        </summary>
                        <div class="text-slate-600 dark:text-slate-400 px-6 md:px-8 pb-8 leading-relaxed font-medium">
                            {faq.a}
                        </div>
                    </details>
                ))}
            </div>
        </div>
    </section>

    {/* --- KONTAKT & ÖFFNUNGSZEITEN (DYNAMISCH) --- */}
    <section class="px-4 sm:px-6 pb-24">
        <div class="max-w-7xl mx-auto">
            <div class="bg-slate-50 dark:bg-slate-900 rounded-[48px] border border-slate-100 dark:border-slate-800 overflow-hidden shadow-sm flex flex-col lg:flex-row">
                
                {/* Linke Seite: Kontakt & Vibe */}
                <div class="p-10 md:p-16 lg:w-3/5 flex flex-col justify-center">
                    <div class="flex items-center gap-4 mb-8">
                        {/* Avatar / Team Icon */}
                        <div class="w-14 h-14 rounded-full bg-rose-100 dark:bg-rose-900/30 flex items-center justify-center text-rose-500 font-bold text-xl border-2 border-white dark:border-slate-700 shadow-md">
                            <i class="fa-solid fa-mug-hot"></i>
                        </div>
                        <div>
                            <p class="text-xs font-bold uppercase tracking-widest text-slate-400">Dein Team</p>
                            {/* LUSTIGER NAME */}
                            <p class="text-slate-900 dark:text-white font-bold leading-tight">Die Möglichmacher</p>
                        </div>
                    </div>

                    <h3 class="text-3xl md:text-4xl font-display font-bold text-slate-900 dark:text-white mb-6 tracking-tight">
                        Kaffee an. <span class="text-rose-500">Ohren offen.</span>
                    </h3>
                    <p class="text-slate-500 dark:text-slate-400 leading-relaxed font-medium text-lg mb-10 max-w-lg">
                        Niederschwelliger geht es nicht: Alles ist vertraulich und kostenlos. Wir hören zu und finden gemeinsam den nächsten Schritt für dich. Komm einfach vorbei.
                    </p>

                    <div class="flex flex-col sm:flex-row gap-4">
                        <a href="http://googleusercontent.com/maps.google.com/?q=Grabenstraße+39a,+8010+Graz" target="_blank" class="px-8 py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-full font-bold hover:bg-rose-600 dark:hover:bg-rose-500 hover:text-white transition-all shadow-lg text-center flex items-center justify-center gap-2">
                            <i class="fa-solid fa-map-pin"></i> Route planen
                        </a>
                        <a href="tel:+43316672248" class="px-8 py-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-900 dark:text-white rounded-full font-bold hover:border-slate-900 dark:hover:border-slate-500 transition-all flex items-center justify-center gap-2">
                            <i class="fa-solid fa-phone text-rose-500"></i> 0316 67 22 48
                        </a>
                    </div>
                </div>

                {/* Rechte Seite: Öffnungszeiten & Barrierefreiheit */}
                <div class="bg-slate-100 dark:bg-slate-800/50 p-10 md:p-16 lg:w-2/5 border-t lg:border-t-0 lg:border-l border-slate-200 dark:border-slate-800 flex flex-col justify-center">
                    
                    {/* Öffnungszeiten */}
                    <div class="mb-8">
                        <h4 class="font-display font-bold text-xl text-slate-900 dark:text-white mb-6 flex items-center gap-2">
                            <i class="fa-regular fa-clock text-rose-500"></i> Wir sind für dich da
                        </h4>
                        <ul class="space-y-4">
                            {openingHours.map((slot: any) => (
                                <li class={`flex justify-between items-center border-b border-slate-200 dark:border-slate-700 pb-2 ${slot.highlight ? 'text-rose-600 dark:text-rose-400 font-bold' : ''}`}>
                                    <span class="font-bold text-slate-700 dark:text-slate-300">{slot.label}</span>
                                    <span class="font-mono text-slate-500 dark:text-slate-400">{slot.time}</span>
                                </li>
                            ))}
                        </ul>
                    </div>

                    {/* Barrierefreiheit */}
                    {accessibilityItems.length > 0 && (
                        <div class="mb-8">
                            <h5 class="font-bold text-sm text-slate-900 dark:text-white mb-3 flex items-center gap-2">
                                <i class="fa-solid fa-universal-access text-rose-500"></i> Barrierefreiheit
                            </h5>
                            <ul class="space-y-2">
                                {accessibilityItems.map((item: any) => (
                                    <li class="flex items-start gap-2 text-xs text-slate-600 dark:text-slate-400 font-medium">
                                        <i class={`fa-solid fa-${item.icon || 'check'} mt-0.5 text-slate-400`}></i>
                                        <span>{item.label}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    )}

                    {/* KONTAKT & TERMIN */}
                    <div class="p-4 bg-yellow-100 dark:bg-yellow-900/20 rounded-2xl border border-yellow-200 dark:border-yellow-900/50 mb-8">
                        <p class="text-xs text-yellow-800 dark:text-yellow-200 font-bold leading-tight mb-2">
                            <i class="fa-solid fa-info-circle mr-1"></i>
                            Termine & Anruf
                        </p>
                        <p class="text-xs text-yellow-700 dark:text-yellow-300/80 leading-relaxed">
                            Terminvereinbarung gerne via <a href="mailto:office@diebruecke.cc" class="underline decoration-dotted hover:text-rose-500">office@diebruecke.cc</a> oder einfach während der Öffnungszeiten anrufen.
                        </p>
                    </div>

                    {/* EXTERNER NOTFALL LINK (PSYNOT) */}
                    <div class="pt-6 border-t border-slate-200 dark:border-slate-700">
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 text-center">Im akuten Notfall (24/7)</p>
                        
                        <a href="https://psynot-stmk.at" target="_blank" class="block bg-slate-50 dark:bg-slate-800 hover:bg-white dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-700 rounded-xl p-4 transition-all group text-left shadow-sm hover:shadow-md">
                            <div class="flex items-center justify-between mb-1">
                                <span class="font-bold text-slate-700 dark:text-slate-200 text-sm flex items-center gap-2">
                                    <i class="fa-solid fa-phone-volume text-rose-500"></i> Psychosozialer Dienst
                                </span>
                                <i class="fa-solid fa-arrow-up-right-from-square text-xs text-slate-400 group-hover:text-rose-500 transition-colors"></i>
                            </div>
                            <p class="text-xs text-slate-500 dark:text-slate-400 leading-relaxed mt-2">
                                Kostenlose Soforthilfe in der Steiermark, wenn wir geschlossen haben. Rund um die Uhr erreichbar.
                            </p>
                        </a>
                    </div>

                </div>

            </div>
        </div>
    </section>

    <style is:global>
        .text-balance {
            text-wrap: balance;
        }
    </style>

</MainLayout>