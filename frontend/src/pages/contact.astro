---
import MainLayout from '../layouts/MainLayout.astro';

const departments = [
    {
        title: "Zentrale & Verwaltung",
        desc: "Allgemeine Anfragen, Mitgliedschaften und Spenden.",
        mail: "office@diebruecke.cc",
        phone: "+43 316 67 22 48",
        icon: "fa-building"
    },
    {
        title: "Mobile Dienste (LEVO)",
        desc: "Anfragen zu Wohnassistenz, Freizeitassistenz und Familienentlastung.",
        mail: "sozial@diebruecke.cc",
        phone: "+43 316 67 22 48", 
        icon: "fa-hand-holding-heart"
    },
    {
        title: "Kultur & Events",
        desc: "Ticketreservierung, Raumanfragen und Künstler-Booking.",
        mail: "kultur@diebruecke.cc",
        phone: "+43 316 67 22 48",
        icon: "fa-music"
    }
];
---

<MainLayout title="Kontakt">
    
    <section class="relative px-6 sm:px-10 pt-32 pb-20 bg-white overflow-hidden">
        <div class="max-w-7xl mx-auto relative z-10">
            <span class="inline-block px-3 py-1 rounded-full bg-slate-100 text-slate-500 text-xs font-bold uppercase tracking-widest mb-6">
                Erreichbarkeit
            </span>
            <h1 class="text-5xl md:text-7xl lg:text-8xl font-display font-extrabold text-slate-900 tracking-tighter mb-8 leading-[0.9]">
                Wir sind <br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-rose-600 to-slate-600">für dich da.</span>
            </h1>
            <p class="text-xl text-slate-500 max-w-2xl font-medium leading-relaxed">
                Du hast Fragen zu unseren Angeboten, möchtest Tickets reservieren oder brauchst Unterstützung? 
                Schreib uns, ruf an oder komm einfach vorbei.
            </p>
        </div>
        <div class="absolute top-0 right-0 -mr-20 -mt-20 w-[600px] h-[600px] bg-slate-100 rounded-full blur-3xl opacity-50 pointer-events-none"></div>
    </section>

    <section class="px-6 sm:px-10 pb-24 bg-white">
        <div class="max-w-7xl mx-auto grid lg:grid-cols-2 gap-16 lg:gap-24">
            
            <div class="space-y-12">
                
                <div class="bg-slate-50 rounded-[32px] border border-slate-100 overflow-hidden">
                    
                    <div class="relative w-full h-64 bg-slate-200 group" id="map-container">
                        <iframe 
                            id="google-map"
                            class="w-full h-full absolute inset-0 hidden"
                            loading="lazy"
                            allowfullscreen
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>

                        <div id="map-placeholder" class="absolute inset-0 bg-cover bg-center flex flex-col items-center justify-center p-6 text-center transition-all cursor-pointer hover:bg-slate-300/50" 
                             style="background-image: url('https://maps.googleapis.com/maps/api/staticmap?center=Grabenstraße+39a,Graz&zoom=15&size=800x400&maptype=roadmap&style=feature:all|saturation:-100&key=YOUR_API_KEY_PLACEHOLDER'); background-color: #e2e8f0;">
                             
                            <div class="absolute inset-0 bg-slate-200 opacity-50" style="background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 20px 20px;"></div>
                            
                            <div class="relative z-10 bg-white/90 backdrop-blur-md p-6 rounded-2xl shadow-xl border border-white/50 max-w-xs">
                                <div class="w-12 h-12 bg-rose-600 rounded-full flex items-center justify-center text-white text-xl mx-auto mb-3 shadow-lg">
                                    <i class="fa-solid fa-location-dot"></i>
                                </div>
                                <h4 class="font-bold text-slate-900 mb-1">Karte laden</h4>
                                <p class="text-xs text-slate-500 mb-4">
                                    Mit dem Klick akzeptierst du, dass Daten an Google Maps übertragen werden.
                                </p>
                                <button id="btn-load-map" class="bg-slate-900 text-white text-xs font-bold uppercase tracking-widest px-4 py-2 rounded-full hover:bg-rose-600 transition-colors w-full">
                                    Karte aktivieren
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="p-8">
                        <div class="flex items-start gap-4 mb-8">
                            <div>
                                <h3 class="font-bold text-xl text-slate-900 leading-tight mb-2">Die Brücke <br><span class="text-sm font-normal text-slate-500">soziokulturelles Zentrum</span></h3>
                                <p class="text-slate-500 leading-relaxed text-lg">
                                    Grabenstraße 39a <br>
                                    8010 Graz <br>
                                    Österreich
                                </p>
                                <a href="https://www.google.com/maps/search/?api=1&query=Die+Brücke+Grabenstraße+39a+Graz" target="_blank" class="inline-flex items-center gap-2 text-sm font-bold text-rose-600 mt-4 hover:underline">
                                    In Google Maps öffnen <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                </a>
                            </div>
                        </div>

                        <div class="h-px bg-slate-200 w-full mb-8"></div>

                        <h4 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                            <i class="fa-solid fa-bus text-slate-400"></i> Anfahrt mit Öffis
                        </h4>
                        
                        <div class="space-y-6">
                            <div>
                                <p class="text-slate-900 text-sm font-bold mb-1">Straßenbahn (Richtung Andritz)</p>
                                <p class="text-slate-500 text-sm mb-2">Haltestelle <strong class="text-slate-700">Hasnerplatz / Päd. Hochschule</strong>. Von dort kurzer Fußweg durch den Park.</p>
                                <div class="flex flex-wrap gap-2">
                                    <span class="px-2 py-1 rounded bg-white border border-slate-200 text-xs font-bold text-slate-600">Linie 3</span>
                                    <span class="px-2 py-1 rounded bg-white border border-slate-200 text-xs font-bold text-slate-600">Linie 5</span>
                                </div>
                            </div>

                            <div>
                                <p class="text-slate-900 text-sm font-bold mb-1">Bus</p>
                                <p class="text-slate-500 text-sm mb-2">Haltestelle <strong class="text-slate-700">Grabenstraße</strong>.</p>
                                <div class="flex flex-wrap gap-2">
                                    <span class="px-2 py-1 rounded bg-white border border-slate-200 text-xs font-bold text-slate-600">Bus 39</span>
                                    <span class="px-2 py-1 rounded bg-white border border-slate-200 text-xs font-bold text-slate-600">Bus 63</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-2xl font-display font-bold text-slate-900 mb-6">Bürozeiten</h3>
                    <ul class="space-y-4 text-slate-600">
                        <li class="flex justify-between border-b border-slate-100 pb-2">
                            <span>Montag – Donnerstag</span>
                            <span class="font-bold">09:00 – 16:00</span>
                        </li>
                        <li class="flex justify-between border-b border-slate-100 pb-2">
                            <span>Freitag</span>
                            <span class="font-bold">09:00 – 13:00</span>
                        </li>
                        <li class="flex justify-between text-rose-600 font-medium">
                            <span>Veranstaltungen</span>
                            <span>Je nach Programm</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="bg-white rounded-[40px] shadow-2xl shadow-slate-200/50 p-8 md:p-12 border border-slate-100 relative overflow-hidden h-fit">
                <div class="absolute top-0 right-0 w-64 h-64 bg-rose-50 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>

                <h3 class="text-3xl font-display font-bold text-slate-900 mb-2 relative z-10">Schreib uns</h3>
                <p class="text-slate-500 mb-8 relative z-10">Wir melden uns so schnell wie möglich bei dir.</p>

                <form class="space-y-6 relative z-10" action="#" method="POST" onsubmit="event.preventDefault(); alert('Das Formular ist in dieser Demo noch inaktiv.');">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label for="name" class="text-xs font-bold uppercase tracking-widest text-slate-500 ml-4">Name</label>
                            <input type="text" id="name" required class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all" placeholder="Dein Name" />
                        </div>
                        <div class="space-y-2">
                            <label for="email" class="text-xs font-bold uppercase tracking-widest text-slate-500 ml-4">E-Mail</label>
                            <input type="email" id="email" required class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all" placeholder="deine@mail.com" />
                        </div>
                    </div>

                    <div class="space-y-2">
                        <label for="subject" class="text-xs font-bold uppercase tracking-widest text-slate-500 ml-4">Betreff</label>
                        <select id="subject" class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all appearance-none">
                            <option>Allgemeine Anfrage</option>
                            <option>Soziale Dienste (LEVO)</option>
                            <option>Tickets & Events</option>
                            <option>Raummiete</option>
                            <option>Ehrenamt & Jobs</option>
                        </select>
                    </div>

                    <div class="space-y-2">
                        <label for="message" class="text-xs font-bold uppercase tracking-widest text-slate-500 ml-4">Nachricht</label>
                        <textarea id="message" rows="5" required class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all" placeholder="Wie können wir helfen?"></textarea>
                    </div>

                    <div class="pt-4">
                        <button type="submit" class="w-full bg-slate-900 text-white font-bold text-lg rounded-2xl py-4 hover:bg-rose-600 transition-all shadow-lg hover:shadow-rose-500/25 transform active:scale-95">
                            Nachricht absenden
                        </button>
                    </div>
                </form>
            </div>

        </div>
    </section>

    <section class="px-6 sm:px-10 py-24 bg-slate-900 text-white">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-5xl font-display font-bold mb-4">Der direkte Draht</h2>
                <p class="text-slate-400">Damit du gleich bei der richtigen Person landest.</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                {departments.map(dept => (
                    <div class="bg-white/5 border border-white/10 rounded-3xl p-8 hover:bg-white/10 transition-colors text-center group">
                        <div class="w-16 h-16 rounded-2xl bg-slate-800 flex items-center justify-center mx-auto mb-6 text-2xl group-hover:scale-110 transition-transform text-rose-500">
                            <i class={`fa-solid ${dept.icon}`}></i>
                        </div>
                        <h3 class="text-xl font-display font-bold mb-3">{dept.title}</h3>
                        <p class="text-slate-400 text-sm mb-6 leading-relaxed h-12">
                            {dept.desc}
                        </p>
                        <div class="space-y-2">
                            <a href={`mailto:${dept.mail}`} class="block text-rose-400 font-bold hover:text-white transition-colors">{dept.mail}</a>
                            <a href={`tel:${dept.phone}`} class="block text-slate-300 hover:text-white transition-colors text-sm">{dept.phone}</a>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    </section>

</MainLayout>

<script>
    function initMapLogic() {
        const placeholder = document.getElementById('map-placeholder');
        const iframe = document.getElementById('google-map') as HTMLIFrameElement;
        
        // Exakte Adresse für den Embed
        const address = "Die Brücke Graz Grabenstraße 39a";
        const mapUrl = `https://maps.google.com/maps?q=${encodeURIComponent(address)}&t=&z=15&ie=UTF8&iwloc=&output=embed`;

        if (placeholder && iframe) {
            placeholder.addEventListener('click', () => {
                // Iframe URL setzen
                iframe.src = mapUrl;
                // Iframe anzeigen
                iframe.classList.remove('hidden');
                // Platzhalter verstecken
                placeholder.style.display = 'none';
            });
        }
    }

    initMapLogic();
    document.addEventListener('astro:after-swap', initMapLogic);
</script>