---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro'; 
import CookieBanner from '../components/CookieBanner.astro'; // <--- IMPORT HINZUFÜGEN
import '../styles/global.css';

const { title } = Astro.props;
---

<!DOCTYPE html> 
<html lang="de" class="scroll-smooth"> 
  <head> 
    <meta charset="utf-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> 
    <title>{title ? `${title} - Die Brücke` : 'Die Brücke - Studio'}</title>         

    <script is:inline>
      const themeKey = 'theme';
      const updateTheme = () => {
        const local = typeof localStorage !== 'undefined' ? localStorage.getItem(themeKey) : null;
        const system = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        const mode = local || system;
        document.documentElement.classList.toggle('dark', mode === 'dark');
        document.documentElement.style.colorScheme = mode;
      };
      updateTheme();
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
        if (!localStorage.getItem(themeKey)) updateTheme();
      });
      window.toggleTheme = () => {
        const isDark = document.documentElement.classList.contains('dark');
        localStorage.setItem(themeKey, isDark ? 'light' : 'dark');
        updateTheme();
        window.dispatchEvent(new Event('theme-change'));
      };
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style is:global>
      @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap');
      
      body { font-family: 'Plus Jakarta Sans', sans-serif; }
      .font-display { font-family: 'Outfit', sans-serif; }

      /* Sticky Scroll Fix */
      html { overflow-x: visible; scroll-behavior: smooth; }
      body { overflow-x: clip; width: 100%; }
    </style>
  </head>     

  <body class="antialiased p-4 md:p-8 min-h-screen bg-gray-50 dark:bg-black transition-colors duration-300"> 
        
    <div class="relative max-w-[1400px] mx-auto rounded-[40px] shadow-2xl rounded-canvas isolate flex flex-col min-h-[calc(100vh-4rem)] bg-white dark:bg-slate-900 transition-colors duration-300">

      <div class="sticky top-0 z-50 rounded-t-[40px] overflow-hidden">
        <Header />
      </div>

      <main class="flex-grow dark:text-slate-200">
        <slot />
      </main>

      <Footer />
      <CookieBanner />
    </div>

    <style is:global>
        /* Erzwingt weiße Überschriften im Dark Mode innerhalb von Main */
        html.dark main h1, html.dark main h2, html.dark main h3, html.dark main h4, html.dark main h5, html.dark main h6 {
            color: #f8fafc !important; /* Slate-50 */
        }
        /* Ausnahme für Gradient-Texte */
        html.dark main .text-transparent {
            color: transparent !important;
        }
    </style>

  </body>     
</html>