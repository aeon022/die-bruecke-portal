---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro'; 

const { title } = Astro.props;
---

<!DOCTYPE html> 
<html lang="de" class="scroll-smooth bg-slate-100 text-slate-900 dark:bg-slate-950 dark:text-slate-50"> 
  <head> 
    <meta charset="utf-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> 
    <title>{title ? `${title} - Die Brücke` : 'Die Brücke - Studio'}</title>         

    <!-- Dark mode (no FOUC): set html.dark before Tailwind loads -->
    <script is:inline>
      (() => {
        const KEY = 'theme'; // 'light' | 'dark'
        try {
          const saved = localStorage.getItem(KEY);
          const systemPrefersDark = window.matchMedia?.('(prefers-color-scheme: dark)')?.matches;
          // If user saved a choice, use it. Otherwise follow system.
          const useDark = saved ? saved === 'dark' : Boolean(systemPrefersDark);
          document.documentElement.classList.toggle('dark', useDark);
          document.documentElement.style.colorScheme = useDark ? 'dark' : 'light';
        } catch {}
      })();
    </script>


    <!-- Tailwind v4 browser config: use class-based dark mode (manual toggle) -->
    <script is:inline>
      window.tailwind = window.tailwind || {};
      window.tailwind.config = {
        darkMode: 'class',
      };
    </script>

    <!-- Tailwind Browser: dark: soll auf html.dark reagieren (nicht nur System) -->
        <style type="text/tailwindcss">
            @custom-variant dark (&:where(.dark, .dark *));
        </style>

    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style is:global>
      @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap');

      :root {
        --font-display: 'Outfit', sans-serif;
        --font-body: 'Plus Jakarta Sans', sans-serif;
      }
      
      body {
        font-family: var(--font-body);
      }
      
      .font-display {
        font-family: var(--font-display);
      }

      .rounded-canvas {
        background-color: white;
        border-radius: 40px;
      }
      html.dark .rounded-canvas {
        background-color: rgb(15 23 42); /* slate-900 */
      }

      .nav-overlay {
        transform: translateY(-100%);
        transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        visibility: visible;
      }
      .nav-overlay.open {
        transform: translateY(0);
      }

      .image-mask {
        border-radius: 20px 20px 20px 100px;
        overflow: hidden;
      }

      /* --- GLOBAL DARK-MODE REMAP (keeps existing pages working) ---
         Applies only when an element does NOT already define a dark: variant,
         so components that are already dark-aware won’t be overridden.
      */
      html.dark .bg-white:not([class*="dark:bg-"]) {
        background-color: rgb(15 23 42); /* slate-900 */
      }
      html.dark .bg-slate-50:not([class*="dark:bg-"]) {
        background-color: rgb(30 41 59); /* slate-800 */
      }
      html.dark .bg-slate-100:not([class*="dark:bg-"]) {
        background-color: rgb(30 41 59); /* slate-800 */
      }

      html.dark .text-slate-900:not([class*="dark:text-"]) {
        color: rgb(248 250 252); /* slate-50 */
      }
      html.dark .text-slate-600:not([class*="dark:text-"]) {
        color: rgb(226 232 240); /* slate-200 */
      }
      html.dark .text-slate-500:not([class*="dark:text-"]) {
        color: rgb(203 213 225); /* slate-300 */
      }
      html.dark .text-slate-400:not([class*="dark:text-"]) {
        color: rgb(148 163 184); /* slate-400 */
      }

      html.dark .border-slate-100:not([class*="dark:border-"]) {
        border-color: rgba(255, 255, 255, 0.10);
      }
      html.dark .border-slate-200:not([class*="dark:border-"]) {
        border-color: rgba(255, 255, 255, 0.12);
      }
      html.dark .border-slate-300:not([class*="dark:border-"]) {
        border-color: rgba(255, 255, 255, 0.14);
      }

      /* Tailwind ring utility: remap subtle light ring in dark mode */
      html.dark .ring-black\/5:not([class*="dark:ring-"]) {
        --tw-ring-color: rgba(255, 255, 255, 0.10);
      }

      [hidden] {
        display: none !important;
      }

      html {
        font-display: swap;
        overflow-x: clip; 
      }
    </style>

    <script is:inline>
      (function(){try{if(!document.documentElement.hasAttribute('data-pg-ia-disabled')) { window.pgia_small_mq=typeof pgia_small_mq=='string'?pgia_small_mq:'(max-width:767px)';window.pgia_large_mq=typeof pgia_large_mq=='string'?pgia_large_mq:'(min-width:768px)';var style = document.createElement('style');var pgcss='html:not(.pg-ia-no-preview) [data-pg-ia-hide=\"\"] {opacity:0;visibility:hidden;}html:not(.pg-ia-no-preview) [data-pg-ia-show=\"\"] {opacity:1;visibility:visible;display:block;}';if(document.documentElement.hasAttribute('data-pg-id') && document.documentElement.hasAttribute('data-pg-mobile')) {pgia_small_mq='(min-width:0)';pgia_large_mq='(min-width:99999px)'} pgcss+='@media ' + pgia_small_mq + '{ html:not(.pg-ia-no-preview) [data-pg-ia-hide=\"mobile\"] {opacity:0;visibility:hidden;}html:not(.pg-ia-no-preview) [data-pg-ia-show=\"mobile\"] {opacity:1;visibility:visible;display:block;}}';pgcss+='@media ' + pgia_large_mq + '{html:not(.pg-ia-no-preview) [data-pg-ia-hide=\"desktop\"] {opacity:0;visibility:hidden;}html:not(.pg-ia-no-preview) [data-pg-ia-show=\"desktop\"] {opacity:1;visibility:visible;display:block;}}';style.innerHTML=pgcss;document.querySelector('head').appendChild(style);}}catch(e){console&&console.log(e);}})()
    </script>

  </head>     

  <body class="font-body antialiased p-4 md:p-8 min-h-screen bg-slate-100 text-slate-900 dark:bg-slate-950 dark:text-slate-50"> 
        
    <div class="relative max-w-[1400px] mx-auto bg-white dark:bg-slate-900 rounded-[40px] shadow-2xl overflow-clip ring-1 ring-black/5 dark:ring-white/10 rounded-canvas isolate flex flex-col min-h-[calc(100vh-4rem)]">

      <Header />

      <main class="flex-grow">
        <slot />
      </main>

      <Footer />
    </div>

  </body>     
</html>